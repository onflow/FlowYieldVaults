{
  "test_file": "../clean_test_output.log",
  "parameters": {
    "collateral_factor": "0.8",
    "target_health": "1.3",
    "tolerance": "0.001",
    "rebalance_threshold": "0.05",
    "deposit_amount": "1000",
    "initial_moet_borrowed": "615.3846153846153846153846154"
  },
  "summary": {
    "total_price_changes": 34,
    "actual_rebalances": 3,
    "skipped": 31,
    "passed": 1,
    "failed": 2,
    "pass_rate": 33.33333333333333
  },
  "states": [
    {
      "line": 288,
      "yield_balance": "615.38461538",
      "yield_price": "1.10000000",
      "moet_value": "676.92307691",
      "stage": "|== Stage 0: YieldToken +10% to 1.1"
    },
    {
      "line": 317,
      "yield_balance": "615.38461538",
      "yield_price": "1.10000000",
      "moet_value": "676.92307691",
      "stage": "|== Stage 0: YieldToken +10% to 1.1"
    },
    {
      "line": 360,
      "yield_balance": "615.38461538",
      "yield_price": "1.20000000",
      "moet_value": "738.46153845",
      "stage": "|== Stage 1: YieldToken +20% to 1.2"
    },
    {
      "line": 389,
      "yield_balance": "615.38461538",
      "yield_price": "1.20000000",
      "moet_value": "738.46153845",
      "stage": "|== Stage 1: YieldToken +20% to 1.2"
    },
    {
      "line": 432,
      "yield_balance": "615.38461538",
      "yield_price": "1.30000000",
      "moet_value": "799.99999999",
      "stage": "|== Stage 2: YieldToken +30% to 1.3"
    },
    {
      "line": 461,
      "yield_balance": "615.38461538",
      "yield_price": "1.30000000",
      "moet_value": "799.99999999",
      "stage": "|== Stage 2: YieldToken +30% to 1.3"
    },
    {
      "line": 504,
      "yield_balance": "615.38461538",
      "yield_price": "1.40000000",
      "moet_value": "861.53846153",
      "stage": "|== Stage 3: YieldToken +40% to 1.4"
    },
    {
      "line": 533,
      "yield_balance": "615.38461538",
      "yield_price": "1.40000000",
      "moet_value": "861.53846153",
      "stage": "|== Stage 3: YieldToken +40% to 1.4"
    },
    {
      "line": 576,
      "yield_balance": "615.38461538",
      "yield_price": "1.50000000",
      "moet_value": "923.07692307",
      "stage": "|== Stage 4: YieldToken +50% to 1.5"
    },
    {
      "line": 605,
      "yield_balance": "615.38461538",
      "yield_price": "1.50000000",
      "moet_value": "923.07692307",
      "stage": "|== Stage 4: YieldToken +50% to 1.5"
    },
    {
      "line": 648,
      "yield_balance": "615.38461538",
      "yield_price": "1.30000000",
      "moet_value": "799.99999999",
      "stage": "|== Stage 5: YieldToken drops to 1.3"
    },
    {
      "line": 677,
      "yield_balance": "615.38461538",
      "yield_price": "1.30000000",
      "moet_value": "799.99999999",
      "stage": "|== Stage 5: YieldToken drops to 1.3"
    },
    {
      "line": 720,
      "yield_balance": "615.38461538",
      "yield_price": "1.10000000",
      "moet_value": "676.92307691",
      "stage": "|== Stage 6: YieldToken drops to 1.1"
    },
    {
      "line": 749,
      "yield_balance": "615.38461538",
      "yield_price": "1.10000000",
      "moet_value": "676.92307691",
      "stage": "|== Stage 6: YieldToken drops to 1.1"
    },
    {
      "line": 792,
      "yield_balance": "615.38461538",
      "yield_price": "0.90000000",
      "moet_value": "553.84615384",
      "stage": "|== Stage 7: YieldToken drops to 0.9"
    },
    {
      "line": 821,
      "yield_balance": "589.08612750",
      "yield_price": "0.90000000",
      "moet_value": "530.17751475",
      "stage": "|== Stage 7: YieldToken drops to 0.9"
    },
    {
      "line": 867,
      "yield_balance": "589.08612750",
      "yield_price": "0.70000000",
      "moet_value": "412.36028925",
      "stage": "|== Stage 8: YieldToken drops to 0.7"
    },
    {
      "line": 896,
      "yield_balance": "456.72670393",
      "yield_price": "0.70000000",
      "moet_value": "319.70869275",
      "stage": "|== Stage 8: YieldToken drops to 0.7"
    },
    {
      "line": 942,
      "yield_balance": "456.72670393",
      "yield_price": "0.50000000",
      "moet_value": "228.36335196",
      "stage": "|== Stage 9: YieldToken drops to 0.5"
    },
    {
      "line": 971,
      "yield_balance": "281.06258702",
      "yield_price": "0.50000000",
      "moet_value": "140.53129351",
      "stage": "|== Stage 9: YieldToken drops to 0.5"
    },
    {
      "line": 1667,
      "yield_balance": "615.38461538",
      "yield_price": "1.10000000",
      "moet_value": "676.92307691",
      "stage": "|== Stage 0: YieldToken +10% to 1.1"
    },
    {
      "line": 1696,
      "yield_balance": "615.38461538",
      "yield_price": "1.10000000",
      "moet_value": "676.92307691",
      "stage": "|== Stage 0: YieldToken +10% to 1.1"
    },
    {
      "line": 1739,
      "yield_balance": "615.38461538",
      "yield_price": "1.20000000",
      "moet_value": "738.46153845",
      "stage": "|== Stage 1: YieldToken +20% to 1.2"
    },
    {
      "line": 1768,
      "yield_balance": "615.38461538",
      "yield_price": "1.20000000",
      "moet_value": "738.46153845",
      "stage": "|== Stage 1: YieldToken +20% to 1.2"
    },
    {
      "line": 1811,
      "yield_balance": "615.38461538",
      "yield_price": "1.30000000",
      "moet_value": "799.99999999",
      "stage": "|== Stage 2: YieldToken +30% to 1.3"
    },
    {
      "line": 1840,
      "yield_balance": "615.38461538",
      "yield_price": "1.30000000",
      "moet_value": "799.99999999",
      "stage": "|== Stage 2: YieldToken +30% to 1.3"
    },
    {
      "line": 1883,
      "yield_balance": "615.38461538",
      "yield_price": "1.40000000",
      "moet_value": "861.53846153",
      "stage": "|== Stage 3: YieldToken +40% to 1.4"
    },
    {
      "line": 1912,
      "yield_balance": "615.38461538",
      "yield_price": "1.40000000",
      "moet_value": "861.53846153",
      "stage": "|== Stage 3: YieldToken +40% to 1.4"
    },
    {
      "line": 1955,
      "yield_balance": "615.38461538",
      "yield_price": "1.50000000",
      "moet_value": "923.07692307",
      "stage": "|== Stage 4: YieldToken +50% to 1.5"
    },
    {
      "line": 1984,
      "yield_balance": "615.38461538",
      "yield_price": "1.50000000",
      "moet_value": "923.07692307",
      "stage": "|== Stage 4: YieldToken +50% to 1.5"
    },
    {
      "line": 2027,
      "yield_balance": "615.38461538",
      "yield_price": "1.30000000",
      "moet_value": "799.99999999",
      "stage": "|== Stage 5: YieldToken drops to 1.3"
    },
    {
      "line": 2056,
      "yield_balance": "615.38461538",
      "yield_price": "1.30000000",
      "moet_value": "799.99999999",
      "stage": "|== Stage 5: YieldToken drops to 1.3"
    },
    {
      "line": 2099,
      "yield_balance": "615.38461538",
      "yield_price": "1.10000000",
      "moet_value": "676.92307691",
      "stage": "|== Stage 6: YieldToken drops to 1.1"
    },
    {
      "line": 2128,
      "yield_balance": "615.38461538",
      "yield_price": "1.10000000",
      "moet_value": "676.92307691",
      "stage": "|== Stage 6: YieldToken drops to 1.1"
    },
    {
      "line": 2171,
      "yield_balance": "615.38461538",
      "yield_price": "0.90000000",
      "moet_value": "553.84615384",
      "stage": "|== Stage 7: YieldToken drops to 0.9"
    },
    {
      "line": 2200,
      "yield_balance": "589.08612750",
      "yield_price": "0.90000000",
      "moet_value": "530.17751475",
      "stage": "|== Stage 7: YieldToken drops to 0.9"
    },
    {
      "line": 2246,
      "yield_balance": "589.08612750",
      "yield_price": "0.70000000",
      "moet_value": "412.36028925",
      "stage": "|== Stage 8: YieldToken drops to 0.7"
    },
    {
      "line": 2275,
      "yield_balance": "456.72670393",
      "yield_price": "0.70000000",
      "moet_value": "319.70869275",
      "stage": "|== Stage 8: YieldToken drops to 0.7"
    },
    {
      "line": 2321,
      "yield_balance": "456.72670393",
      "yield_price": "0.50000000",
      "moet_value": "228.36335196",
      "stage": "|== Stage 9: YieldToken drops to 0.5"
    },
    {
      "line": 2350,
      "yield_balance": "281.06258702",
      "yield_price": "0.50000000",
      "moet_value": "140.53129351",
      "stage": "|== Stage 9: YieldToken drops to 0.5"
    },
    {
      "line": 3046,
      "yield_balance": "615.38461538",
      "yield_price": "1.10000000",
      "moet_value": "676.92307691",
      "stage": "|== Stage 0: YieldToken +10% to 1.1"
    },
    {
      "line": 3075,
      "yield_balance": "615.38461538",
      "yield_price": "1.10000000",
      "moet_value": "676.92307691",
      "stage": "|== Stage 0: YieldToken +10% to 1.1"
    },
    {
      "line": 3118,
      "yield_balance": "615.38461538",
      "yield_price": "1.20000000",
      "moet_value": "738.46153845",
      "stage": "|== Stage 1: YieldToken +20% to 1.2"
    },
    {
      "line": 3147,
      "yield_balance": "615.38461538",
      "yield_price": "1.20000000",
      "moet_value": "738.46153845",
      "stage": "|== Stage 1: YieldToken +20% to 1.2"
    },
    {
      "line": 3190,
      "yield_balance": "615.38461538",
      "yield_price": "1.30000000",
      "moet_value": "799.99999999",
      "stage": "|== Stage 2: YieldToken +30% to 1.3"
    },
    {
      "line": 3219,
      "yield_balance": "615.38461538",
      "yield_price": "1.30000000",
      "moet_value": "799.99999999",
      "stage": "|== Stage 2: YieldToken +30% to 1.3"
    },
    {
      "line": 3262,
      "yield_balance": "615.38461538",
      "yield_price": "1.40000000",
      "moet_value": "861.53846153",
      "stage": "|== Stage 3: YieldToken +40% to 1.4"
    },
    {
      "line": 3291,
      "yield_balance": "615.38461538",
      "yield_price": "1.40000000",
      "moet_value": "861.53846153",
      "stage": "|== Stage 3: YieldToken +40% to 1.4"
    },
    {
      "line": 3334,
      "yield_balance": "615.38461538",
      "yield_price": "1.50000000",
      "moet_value": "923.07692307",
      "stage": "|== Stage 4: YieldToken +50% to 1.5"
    },
    {
      "line": 3363,
      "yield_balance": "615.38461538",
      "yield_price": "1.50000000",
      "moet_value": "923.07692307",
      "stage": "|== Stage 4: YieldToken +50% to 1.5"
    },
    {
      "line": 3406,
      "yield_balance": "615.38461538",
      "yield_price": "1.30000000",
      "moet_value": "799.99999999",
      "stage": "|== Stage 5: YieldToken drops to 1.3"
    },
    {
      "line": 3435,
      "yield_balance": "615.38461538",
      "yield_price": "1.30000000",
      "moet_value": "799.99999999",
      "stage": "|== Stage 5: YieldToken drops to 1.3"
    },
    {
      "line": 3478,
      "yield_balance": "615.38461538",
      "yield_price": "1.10000000",
      "moet_value": "676.92307691",
      "stage": "|== Stage 6: YieldToken drops to 1.1"
    },
    {
      "line": 3507,
      "yield_balance": "615.38461538",
      "yield_price": "1.10000000",
      "moet_value": "676.92307691",
      "stage": "|== Stage 6: YieldToken drops to 1.1"
    },
    {
      "line": 3550,
      "yield_balance": "615.38461538",
      "yield_price": "0.90000000",
      "moet_value": "553.84615384",
      "stage": "|== Stage 7: YieldToken drops to 0.9"
    },
    {
      "line": 3579,
      "yield_balance": "589.08612750",
      "yield_price": "0.90000000",
      "moet_value": "530.17751475",
      "stage": "|== Stage 7: YieldToken drops to 0.9"
    },
    {
      "line": 3625,
      "yield_balance": "589.08612750",
      "yield_price": "0.70000000",
      "moet_value": "412.36028925",
      "stage": "|== Stage 8: YieldToken drops to 0.7"
    },
    {
      "line": 3654,
      "yield_balance": "456.72670393",
      "yield_price": "0.70000000",
      "moet_value": "319.70869275",
      "stage": "|== Stage 8: YieldToken drops to 0.7"
    },
    {
      "line": 3700,
      "yield_balance": "456.72670393",
      "yield_price": "0.50000000",
      "moet_value": "228.36335196",
      "stage": "|== Stage 9: YieldToken drops to 0.5"
    },
    {
      "line": 3729,
      "yield_balance": "281.06258702",
      "yield_price": "0.50000000",
      "moet_value": "140.53129351",
      "stage": "|== Stage 9: YieldToken drops to 0.5"
    },
    {
      "line": 5463,
      "yield_balance": "615.38461538",
      "yield_price": "1.00000000",
      "moet_value": "615.38461538",
      "stage": "|== Stage 0: Baseline"
    },
    {
      "line": 5517,
      "yield_balance": "615.38461538",
      "yield_price": "1.00000000",
      "moet_value": "615.38461538",
      "stage": "|== Stage 0: Baseline"
    },
    {
      "line": 5600,
      "yield_balance": "615.38461538",
      "yield_price": "1.20000000",
      "moet_value": "738.46153845",
      "stage": "|== Stage 1: FLOW crash, YieldToken rise"
    },
    {
      "line": 5654,
      "yield_balance": "487.17948718",
      "yield_price": "1.20000000",
      "moet_value": "584.61538461",
      "stage": "|== Stage 1: FLOW crash, YieldToken rise"
    },
    {
      "line": 5740,
      "yield_balance": "487.17948718",
      "yield_price": "0.80000000",
      "moet_value": "389.74358974",
      "stage": "|== Stage 2: FLOW rise, YieldToken drop"
    },
    {
      "line": 5794,
      "yield_balance": "1017.25838118",
      "yield_price": "0.80000000",
      "moet_value": "813.80670494",
      "stage": "|== Stage 2: FLOW rise, YieldToken drop"
    },
    {
      "line": 5890,
      "yield_balance": "1017.25838118",
      "yield_price": "0.50000000",
      "moet_value": "508.62919059",
      "stage": "|== Stage 3: Both crash (MOET slightly depegged)"
    },
    {
      "line": 5944,
      "yield_balance": "0E-8",
      "yield_price": "0.50000000",
      "moet_value": "0E-8",
      "stage": "|== Stage 3: Both crash (MOET slightly depegged)"
    },
    {
      "line": 6035,
      "yield_balance": "0E-8",
      "yield_price": "2.00000000",
      "moet_value": "0E-8",
      "stage": "|== Stage 4: Both moon"
    }
  ],
  "verifications": [
    {
      "before_state": {
        "line": 317,
        "yield_balance": "615.38461538",
        "yield_price": "1.10000000",
        "moet_value": "676.92307691",
        "stage": "|== Stage 0: YieldToken +10% to 1.1"
      },
      "after_state": {
        "line": 360,
        "yield_balance": "615.38461538",
        "yield_price": "1.20000000",
        "moet_value": "738.46153845",
        "stage": "|== Stage 1: YieldToken +20% to 1.2"
      },
      "expected_balance": "512.8205128205128205128205128",
      "price_change_factor": 1.0909090909090908,
      "actual_rebalanced": false,
      "difference": "0",
      "difference_pct": 0.0,
      "verified": true,
      "status": "skipped"
    },
    {
      "before_state": {
        "line": 389,
        "yield_balance": "615.38461538",
        "yield_price": "1.20000000",
        "moet_value": "738.46153845",
        "stage": "|== Stage 1: YieldToken +20% to 1.2"
      },
      "after_state": {
        "line": 432,
        "yield_balance": "615.38461538",
        "yield_price": "1.30000000",
        "moet_value": "799.99999999",
        "stage": "|== Stage 2: YieldToken +30% to 1.3"
      },
      "expected_balance": "473.3727810650887573964497042",
      "price_change_factor": 1.0833333333333333,
      "actual_rebalanced": false,
      "difference": "0",
      "difference_pct": 0.0,
      "verified": true,
      "status": "skipped"
    },
    {
      "before_state": {
        "line": 461,
        "yield_balance": "615.38461538",
        "yield_price": "1.30000000",
        "moet_value": "799.99999999",
        "stage": "|== Stage 2: YieldToken +30% to 1.3"
      },
      "after_state": {
        "line": 504,
        "yield_balance": "615.38461538",
        "yield_price": "1.40000000",
        "moet_value": "861.53846153",
        "stage": "|== Stage 3: YieldToken +40% to 1.4"
      },
      "expected_balance": "439.5604395604395604395604396",
      "price_change_factor": 1.0769230769230769,
      "actual_rebalanced": false,
      "difference": "0",
      "difference_pct": 0.0,
      "verified": true,
      "status": "skipped"
    },
    {
      "before_state": {
        "line": 533,
        "yield_balance": "615.38461538",
        "yield_price": "1.40000000",
        "moet_value": "861.53846153",
        "stage": "|== Stage 3: YieldToken +40% to 1.4"
      },
      "after_state": {
        "line": 576,
        "yield_balance": "615.38461538",
        "yield_price": "1.50000000",
        "moet_value": "923.07692307",
        "stage": "|== Stage 4: YieldToken +50% to 1.5"
      },
      "expected_balance": "410.2564102564102564102564103",
      "price_change_factor": 1.0714285714285714,
      "actual_rebalanced": false,
      "difference": "0",
      "difference_pct": 0.0,
      "verified": true,
      "status": "skipped"
    },
    {
      "before_state": {
        "line": 605,
        "yield_balance": "615.38461538",
        "yield_price": "1.50000000",
        "moet_value": "923.07692307",
        "stage": "|== Stage 4: YieldToken +50% to 1.5"
      },
      "after_state": {
        "line": 648,
        "yield_balance": "615.38461538",
        "yield_price": "1.30000000",
        "moet_value": "799.99999999",
        "stage": "|== Stage 5: YieldToken drops to 1.3"
      },
      "expected_balance": "473.3727810650887573964497042",
      "price_change_factor": 0.8666666666666667,
      "actual_rebalanced": false,
      "difference": "0",
      "difference_pct": 0.0,
      "verified": true,
      "status": "skipped"
    },
    {
      "before_state": {
        "line": 677,
        "yield_balance": "615.38461538",
        "yield_price": "1.30000000",
        "moet_value": "799.99999999",
        "stage": "|== Stage 5: YieldToken drops to 1.3"
      },
      "after_state": {
        "line": 720,
        "yield_balance": "615.38461538",
        "yield_price": "1.10000000",
        "moet_value": "676.92307691",
        "stage": "|== Stage 6: YieldToken drops to 1.1"
      },
      "expected_balance": "559.4405594405594405594405595",
      "price_change_factor": 0.8461538461538461,
      "actual_rebalanced": false,
      "difference": "0",
      "difference_pct": 0.0,
      "verified": true,
      "status": "skipped"
    },
    {
      "before_state": {
        "line": 749,
        "yield_balance": "615.38461538",
        "yield_price": "1.10000000",
        "moet_value": "676.92307691",
        "stage": "|== Stage 6: YieldToken drops to 1.1"
      },
      "after_state": {
        "line": 792,
        "yield_balance": "615.38461538",
        "yield_price": "0.90000000",
        "moet_value": "553.84615384",
        "stage": "|== Stage 7: YieldToken drops to 0.9"
      },
      "expected_balance": "683.7606837606837606837606838",
      "price_change_factor": 0.8181818181818182,
      "actual_rebalanced": false,
      "difference": "0",
      "difference_pct": 0.0,
      "verified": true,
      "status": "skipped"
    },
    {
      "before_state": {
        "line": 821,
        "yield_balance": "589.08612750",
        "yield_price": "0.90000000",
        "moet_value": "530.17751475",
        "stage": "|== Stage 7: YieldToken drops to 0.9"
      },
      "after_state": {
        "line": 867,
        "yield_balance": "589.08612750",
        "yield_price": "0.70000000",
        "moet_value": "412.36028925",
        "stage": "|== Stage 8: YieldToken drops to 0.7"
      },
      "expected_balance": "879.1208791208791208791208791",
      "price_change_factor": 0.7777777777777778,
      "actual_rebalanced": false,
      "difference": "0",
      "difference_pct": 0.0,
      "verified": true,
      "status": "skipped"
    },
    {
      "before_state": {
        "line": 896,
        "yield_balance": "456.72670393",
        "yield_price": "0.70000000",
        "moet_value": "319.70869275",
        "stage": "|== Stage 8: YieldToken drops to 0.7"
      },
      "after_state": {
        "line": 942,
        "yield_balance": "456.72670393",
        "yield_price": "0.50000000",
        "moet_value": "228.36335196",
        "stage": "|== Stage 9: YieldToken drops to 0.5"
      },
      "expected_balance": "1230.769230769230769230769231",
      "price_change_factor": 0.7142857142857143,
      "actual_rebalanced": false,
      "difference": "0",
      "difference_pct": 0.0,
      "verified": true,
      "status": "skipped"
    },
    {
      "before_state": {
        "line": 971,
        "yield_balance": "281.06258702",
        "yield_price": "0.50000000",
        "moet_value": "140.53129351",
        "stage": "|== Stage 9: YieldToken drops to 0.5"
      },
      "after_state": {
        "line": 1667,
        "yield_balance": "615.38461538",
        "yield_price": "1.10000000",
        "moet_value": "676.92307691",
        "stage": "|== Stage 0: YieldToken +10% to 1.1"
      },
      "expected_balance": "559.4405594405594405594405595",
      "price_change_factor": 2.2,
      "actual_rebalanced": true,
      "difference": "55.9440559394405594405594405",
      "difference_pct": 9.999999999175,
      "verified": false,
      "status": "fail"
    },
    {
      "before_state": {
        "line": 1696,
        "yield_balance": "615.38461538",
        "yield_price": "1.10000000",
        "moet_value": "676.92307691",
        "stage": "|== Stage 0: YieldToken +10% to 1.1"
      },
      "after_state": {
        "line": 1739,
        "yield_balance": "615.38461538",
        "yield_price": "1.20000000",
        "moet_value": "738.46153845",
        "stage": "|== Stage 1: YieldToken +20% to 1.2"
      },
      "expected_balance": "512.8205128205128205128205128",
      "price_change_factor": 1.0909090909090908,
      "actual_rebalanced": false,
      "difference": "0",
      "difference_pct": 0.0,
      "verified": true,
      "status": "skipped"
    },
    {
      "before_state": {
        "line": 1768,
        "yield_balance": "615.38461538",
        "yield_price": "1.20000000",
        "moet_value": "738.46153845",
        "stage": "|== Stage 1: YieldToken +20% to 1.2"
      },
      "after_state": {
        "line": 1811,
        "yield_balance": "615.38461538",
        "yield_price": "1.30000000",
        "moet_value": "799.99999999",
        "stage": "|== Stage 2: YieldToken +30% to 1.3"
      },
      "expected_balance": "473.3727810650887573964497042",
      "price_change_factor": 1.0833333333333333,
      "actual_rebalanced": false,
      "difference": "0",
      "difference_pct": 0.0,
      "verified": true,
      "status": "skipped"
    },
    {
      "before_state": {
        "line": 1840,
        "yield_balance": "615.38461538",
        "yield_price": "1.30000000",
        "moet_value": "799.99999999",
        "stage": "|== Stage 2: YieldToken +30% to 1.3"
      },
      "after_state": {
        "line": 1883,
        "yield_balance": "615.38461538",
        "yield_price": "1.40000000",
        "moet_value": "861.53846153",
        "stage": "|== Stage 3: YieldToken +40% to 1.4"
      },
      "expected_balance": "439.5604395604395604395604396",
      "price_change_factor": 1.0769230769230769,
      "actual_rebalanced": false,
      "difference": "0",
      "difference_pct": 0.0,
      "verified": true,
      "status": "skipped"
    },
    {
      "before_state": {
        "line": 1912,
        "yield_balance": "615.38461538",
        "yield_price": "1.40000000",
        "moet_value": "861.53846153",
        "stage": "|== Stage 3: YieldToken +40% to 1.4"
      },
      "after_state": {
        "line": 1955,
        "yield_balance": "615.38461538",
        "yield_price": "1.50000000",
        "moet_value": "923.07692307",
        "stage": "|== Stage 4: YieldToken +50% to 1.5"
      },
      "expected_balance": "410.2564102564102564102564103",
      "price_change_factor": 1.0714285714285714,
      "actual_rebalanced": false,
      "difference": "0",
      "difference_pct": 0.0,
      "verified": true,
      "status": "skipped"
    },
    {
      "before_state": {
        "line": 1984,
        "yield_balance": "615.38461538",
        "yield_price": "1.50000000",
        "moet_value": "923.07692307",
        "stage": "|== Stage 4: YieldToken +50% to 1.5"
      },
      "after_state": {
        "line": 2027,
        "yield_balance": "615.38461538",
        "yield_price": "1.30000000",
        "moet_value": "799.99999999",
        "stage": "|== Stage 5: YieldToken drops to 1.3"
      },
      "expected_balance": "473.3727810650887573964497042",
      "price_change_factor": 0.8666666666666667,
      "actual_rebalanced": false,
      "difference": "0",
      "difference_pct": 0.0,
      "verified": true,
      "status": "skipped"
    },
    {
      "before_state": {
        "line": 2056,
        "yield_balance": "615.38461538",
        "yield_price": "1.30000000",
        "moet_value": "799.99999999",
        "stage": "|== Stage 5: YieldToken drops to 1.3"
      },
      "after_state": {
        "line": 2099,
        "yield_balance": "615.38461538",
        "yield_price": "1.10000000",
        "moet_value": "676.92307691",
        "stage": "|== Stage 6: YieldToken drops to 1.1"
      },
      "expected_balance": "559.4405594405594405594405595",
      "price_change_factor": 0.8461538461538461,
      "actual_rebalanced": false,
      "difference": "0",
      "difference_pct": 0.0,
      "verified": true,
      "status": "skipped"
    },
    {
      "before_state": {
        "line": 2128,
        "yield_balance": "615.38461538",
        "yield_price": "1.10000000",
        "moet_value": "676.92307691",
        "stage": "|== Stage 6: YieldToken drops to 1.1"
      },
      "after_state": {
        "line": 2171,
        "yield_balance": "615.38461538",
        "yield_price": "0.90000000",
        "moet_value": "553.84615384",
        "stage": "|== Stage 7: YieldToken drops to 0.9"
      },
      "expected_balance": "683.7606837606837606837606838",
      "price_change_factor": 0.8181818181818182,
      "actual_rebalanced": false,
      "difference": "0",
      "difference_pct": 0.0,
      "verified": true,
      "status": "skipped"
    },
    {
      "before_state": {
        "line": 2200,
        "yield_balance": "589.08612750",
        "yield_price": "0.90000000",
        "moet_value": "530.17751475",
        "stage": "|== Stage 7: YieldToken drops to 0.9"
      },
      "after_state": {
        "line": 2246,
        "yield_balance": "589.08612750",
        "yield_price": "0.70000000",
        "moet_value": "412.36028925",
        "stage": "|== Stage 8: YieldToken drops to 0.7"
      },
      "expected_balance": "879.1208791208791208791208791",
      "price_change_factor": 0.7777777777777778,
      "actual_rebalanced": false,
      "difference": "0",
      "difference_pct": 0.0,
      "verified": true,
      "status": "skipped"
    },
    {
      "before_state": {
        "line": 2275,
        "yield_balance": "456.72670393",
        "yield_price": "0.70000000",
        "moet_value": "319.70869275",
        "stage": "|== Stage 8: YieldToken drops to 0.7"
      },
      "after_state": {
        "line": 2321,
        "yield_balance": "456.72670393",
        "yield_price": "0.50000000",
        "moet_value": "228.36335196",
        "stage": "|== Stage 9: YieldToken drops to 0.5"
      },
      "expected_balance": "1230.769230769230769230769231",
      "price_change_factor": 0.7142857142857143,
      "actual_rebalanced": false,
      "difference": "0",
      "difference_pct": 0.0,
      "verified": true,
      "status": "skipped"
    },
    {
      "before_state": {
        "line": 2350,
        "yield_balance": "281.06258702",
        "yield_price": "0.50000000",
        "moet_value": "140.53129351",
        "stage": "|== Stage 9: YieldToken drops to 0.5"
      },
      "after_state": {
        "line": 3046,
        "yield_balance": "615.38461538",
        "yield_price": "1.10000000",
        "moet_value": "676.92307691",
        "stage": "|== Stage 0: YieldToken +10% to 1.1"
      },
      "expected_balance": "559.4405594405594405594405595",
      "price_change_factor": 2.2,
      "actual_rebalanced": true,
      "difference": "55.9440559394405594405594405",
      "difference_pct": 9.999999999175,
      "verified": false,
      "status": "fail"
    },
    {
      "before_state": {
        "line": 3075,
        "yield_balance": "615.38461538",
        "yield_price": "1.10000000",
        "moet_value": "676.92307691",
        "stage": "|== Stage 0: YieldToken +10% to 1.1"
      },
      "after_state": {
        "line": 3118,
        "yield_balance": "615.38461538",
        "yield_price": "1.20000000",
        "moet_value": "738.46153845",
        "stage": "|== Stage 1: YieldToken +20% to 1.2"
      },
      "expected_balance": "512.8205128205128205128205128",
      "price_change_factor": 1.0909090909090908,
      "actual_rebalanced": false,
      "difference": "0",
      "difference_pct": 0.0,
      "verified": true,
      "status": "skipped"
    },
    {
      "before_state": {
        "line": 3147,
        "yield_balance": "615.38461538",
        "yield_price": "1.20000000",
        "moet_value": "738.46153845",
        "stage": "|== Stage 1: YieldToken +20% to 1.2"
      },
      "after_state": {
        "line": 3190,
        "yield_balance": "615.38461538",
        "yield_price": "1.30000000",
        "moet_value": "799.99999999",
        "stage": "|== Stage 2: YieldToken +30% to 1.3"
      },
      "expected_balance": "473.3727810650887573964497042",
      "price_change_factor": 1.0833333333333333,
      "actual_rebalanced": false,
      "difference": "0",
      "difference_pct": 0.0,
      "verified": true,
      "status": "skipped"
    },
    {
      "before_state": {
        "line": 3219,
        "yield_balance": "615.38461538",
        "yield_price": "1.30000000",
        "moet_value": "799.99999999",
        "stage": "|== Stage 2: YieldToken +30% to 1.3"
      },
      "after_state": {
        "line": 3262,
        "yield_balance": "615.38461538",
        "yield_price": "1.40000000",
        "moet_value": "861.53846153",
        "stage": "|== Stage 3: YieldToken +40% to 1.4"
      },
      "expected_balance": "439.5604395604395604395604396",
      "price_change_factor": 1.0769230769230769,
      "actual_rebalanced": false,
      "difference": "0",
      "difference_pct": 0.0,
      "verified": true,
      "status": "skipped"
    },
    {
      "before_state": {
        "line": 3291,
        "yield_balance": "615.38461538",
        "yield_price": "1.40000000",
        "moet_value": "861.53846153",
        "stage": "|== Stage 3: YieldToken +40% to 1.4"
      },
      "after_state": {
        "line": 3334,
        "yield_balance": "615.38461538",
        "yield_price": "1.50000000",
        "moet_value": "923.07692307",
        "stage": "|== Stage 4: YieldToken +50% to 1.5"
      },
      "expected_balance": "410.2564102564102564102564103",
      "price_change_factor": 1.0714285714285714,
      "actual_rebalanced": false,
      "difference": "0",
      "difference_pct": 0.0,
      "verified": true,
      "status": "skipped"
    },
    {
      "before_state": {
        "line": 3363,
        "yield_balance": "615.38461538",
        "yield_price": "1.50000000",
        "moet_value": "923.07692307",
        "stage": "|== Stage 4: YieldToken +50% to 1.5"
      },
      "after_state": {
        "line": 3406,
        "yield_balance": "615.38461538",
        "yield_price": "1.30000000",
        "moet_value": "799.99999999",
        "stage": "|== Stage 5: YieldToken drops to 1.3"
      },
      "expected_balance": "473.3727810650887573964497042",
      "price_change_factor": 0.8666666666666667,
      "actual_rebalanced": false,
      "difference": "0",
      "difference_pct": 0.0,
      "verified": true,
      "status": "skipped"
    },
    {
      "before_state": {
        "line": 3435,
        "yield_balance": "615.38461538",
        "yield_price": "1.30000000",
        "moet_value": "799.99999999",
        "stage": "|== Stage 5: YieldToken drops to 1.3"
      },
      "after_state": {
        "line": 3478,
        "yield_balance": "615.38461538",
        "yield_price": "1.10000000",
        "moet_value": "676.92307691",
        "stage": "|== Stage 6: YieldToken drops to 1.1"
      },
      "expected_balance": "559.4405594405594405594405595",
      "price_change_factor": 0.8461538461538461,
      "actual_rebalanced": false,
      "difference": "0",
      "difference_pct": 0.0,
      "verified": true,
      "status": "skipped"
    },
    {
      "before_state": {
        "line": 3507,
        "yield_balance": "615.38461538",
        "yield_price": "1.10000000",
        "moet_value": "676.92307691",
        "stage": "|== Stage 6: YieldToken drops to 1.1"
      },
      "after_state": {
        "line": 3550,
        "yield_balance": "615.38461538",
        "yield_price": "0.90000000",
        "moet_value": "553.84615384",
        "stage": "|== Stage 7: YieldToken drops to 0.9"
      },
      "expected_balance": "683.7606837606837606837606838",
      "price_change_factor": 0.8181818181818182,
      "actual_rebalanced": false,
      "difference": "0",
      "difference_pct": 0.0,
      "verified": true,
      "status": "skipped"
    },
    {
      "before_state": {
        "line": 3579,
        "yield_balance": "589.08612750",
        "yield_price": "0.90000000",
        "moet_value": "530.17751475",
        "stage": "|== Stage 7: YieldToken drops to 0.9"
      },
      "after_state": {
        "line": 3625,
        "yield_balance": "589.08612750",
        "yield_price": "0.70000000",
        "moet_value": "412.36028925",
        "stage": "|== Stage 8: YieldToken drops to 0.7"
      },
      "expected_balance": "879.1208791208791208791208791",
      "price_change_factor": 0.7777777777777778,
      "actual_rebalanced": false,
      "difference": "0",
      "difference_pct": 0.0,
      "verified": true,
      "status": "skipped"
    },
    {
      "before_state": {
        "line": 3654,
        "yield_balance": "456.72670393",
        "yield_price": "0.70000000",
        "moet_value": "319.70869275",
        "stage": "|== Stage 8: YieldToken drops to 0.7"
      },
      "after_state": {
        "line": 3700,
        "yield_balance": "456.72670393",
        "yield_price": "0.50000000",
        "moet_value": "228.36335196",
        "stage": "|== Stage 9: YieldToken drops to 0.5"
      },
      "expected_balance": "1230.769230769230769230769231",
      "price_change_factor": 0.7142857142857143,
      "actual_rebalanced": false,
      "difference": "0",
      "difference_pct": 0.0,
      "verified": true,
      "status": "skipped"
    },
    {
      "before_state": {
        "line": 3729,
        "yield_balance": "281.06258702",
        "yield_price": "0.50000000",
        "moet_value": "140.53129351",
        "stage": "|== Stage 9: YieldToken drops to 0.5"
      },
      "after_state": {
        "line": 5463,
        "yield_balance": "615.38461538",
        "yield_price": "1.00000000",
        "moet_value": "615.38461538",
        "stage": "|== Stage 0: Baseline"
      },
      "expected_balance": "615.3846153846153846153846154",
      "price_change_factor": 2.0,
      "actual_rebalanced": true,
      "difference": "4.6153846153846154E-9",
      "difference_pct": 7.5e-10,
      "verified": true,
      "status": "pass"
    },
    {
      "before_state": {
        "line": 5517,
        "yield_balance": "615.38461538",
        "yield_price": "1.00000000",
        "moet_value": "615.38461538",
        "stage": "|== Stage 0: Baseline"
      },
      "after_state": {
        "line": 5600,
        "yield_balance": "615.38461538",
        "yield_price": "1.20000000",
        "moet_value": "738.46153845",
        "stage": "|== Stage 1: FLOW crash, YieldToken rise"
      },
      "expected_balance": "512.8205128205128205128205128",
      "price_change_factor": 1.2,
      "actual_rebalanced": false,
      "difference": "0",
      "difference_pct": 0.0,
      "verified": true,
      "status": "skipped"
    },
    {
      "before_state": {
        "line": 5654,
        "yield_balance": "487.17948718",
        "yield_price": "1.20000000",
        "moet_value": "584.61538461",
        "stage": "|== Stage 1: FLOW crash, YieldToken rise"
      },
      "after_state": {
        "line": 5740,
        "yield_balance": "487.17948718",
        "yield_price": "0.80000000",
        "moet_value": "389.74358974",
        "stage": "|== Stage 2: FLOW rise, YieldToken drop"
      },
      "expected_balance": "769.2307692307692307692307692",
      "price_change_factor": 0.6666666666666666,
      "actual_rebalanced": false,
      "difference": "0",
      "difference_pct": 0.0,
      "verified": true,
      "status": "skipped"
    },
    {
      "before_state": {
        "line": 5794,
        "yield_balance": "1017.25838118",
        "yield_price": "0.80000000",
        "moet_value": "813.80670494",
        "stage": "|== Stage 2: FLOW rise, YieldToken drop"
      },
      "after_state": {
        "line": 5890,
        "yield_balance": "1017.25838118",
        "yield_price": "0.50000000",
        "moet_value": "508.62919059",
        "stage": "|== Stage 3: Both crash (MOET slightly depegged)"
      },
      "expected_balance": "1230.769230769230769230769231",
      "price_change_factor": 0.625,
      "actual_rebalanced": false,
      "difference": "0",
      "difference_pct": 0.0,
      "verified": true,
      "status": "skipped"
    },
    {
      "before_state": {
        "line": 5944,
        "yield_balance": "0E-8",
        "yield_price": "0.50000000",
        "moet_value": "0E-8",
        "stage": "|== Stage 3: Both crash (MOET slightly depegged)"
      },
      "after_state": {
        "line": 6035,
        "yield_balance": "0E-8",
        "yield_price": "2.00000000",
        "moet_value": "0E-8",
        "stage": "|== Stage 4: Both moon"
      },
      "expected_balance": "307.6923076923076923076923077",
      "price_change_factor": 4.0,
      "actual_rebalanced": false,
      "difference": "0",
      "difference_pct": 0.0,
      "verified": true,
      "status": "skipped"
    }
  ],
  "failures": [
    {
      "before_state": {
        "line": 971,
        "yield_balance": "281.06258702",
        "yield_price": "0.50000000",
        "moet_value": "140.53129351",
        "stage": "|== Stage 9: YieldToken drops to 0.5"
      },
      "after_state": {
        "line": 1667,
        "yield_balance": "615.38461538",
        "yield_price": "1.10000000",
        "moet_value": "676.92307691",
        "stage": "|== Stage 0: YieldToken +10% to 1.1"
      },
      "expected_balance": "559.4405594405594405594405595",
      "price_change_factor": 2.2,
      "actual_rebalanced": true,
      "difference": "55.9440559394405594405594405",
      "difference_pct": 9.999999999175,
      "verified": false,
      "status": "fail"
    },
    {
      "before_state": {
        "line": 2350,
        "yield_balance": "281.06258702",
        "yield_price": "0.50000000",
        "moet_value": "140.53129351",
        "stage": "|== Stage 9: YieldToken drops to 0.5"
      },
      "after_state": {
        "line": 3046,
        "yield_balance": "615.38461538",
        "yield_price": "1.10000000",
        "moet_value": "676.92307691",
        "stage": "|== Stage 0: YieldToken +10% to 1.1"
      },
      "expected_balance": "559.4405594405594405594405595",
      "price_change_factor": 2.2,
      "actual_rebalanced": true,
      "difference": "55.9440559394405594405594405",
      "difference_pct": 9.999999999175,
      "verified": false,
      "status": "fail"
    }
  ],
  "price_range": {
    "min": "0.50000000",
    "max": "2.00000000"
  },
  "balance_range": {
    "min": "0E-8",
    "max": "1017.25838118"
  }
}